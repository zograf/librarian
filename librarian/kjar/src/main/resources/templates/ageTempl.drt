template header
age
flag
sal

package rules;
import com.librarian.model.*;

template "age rules"

rule "Age @{row.rowNumber}"
salience @{sal}
no-loop
    when
        $u: UserPreferences(age > @{age})
        not Flag(name == "flag_adult", up == $u)
        not Flag(name == "flag_juvenile", up == $u)
        not Flag(name == "flag_ya", up == $u)
    then
        insert(new Flag(@{flag}, $u));
end

end template